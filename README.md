# State of X | capturing tool

This project generate screenshots of the survey result apps
which can then be used for social sharing for example.

It's gonna generate screenshots for every locale and every 
exportable block. 

[requirements](#requirements) | [install](#install) | [usage](#usage) | [contributing](#contributing)

## Requirements

### Tooling

- `node.js` v15
- `yarn`

### Results project

This project relies on the sitemap generated by our gatsby results app,
thus, you should have both a `config/capture.yml` and `config/sitemap.yml`
file available in the project's directory.

> :warning: we're using `sitemap.yml` (VS `raw_sitemap.yml`),
> so you need to run `gatsby develop` or `gatsby build`
> prior to trying to capture.
> You also need to **make sure the application is running** :)

The file `config/capture.yml` should have the following structure:

```yaml
# the base URL to use, can be either local or remote,
baseUrl: http://localhost:9000
```

Regarding the structure of the `sitemap.yml` file, please have
a look at the `Sitemap` type in `src/types.ts`. 

## Install

`yarn`

## Usage

First you need to compile TypeScript:

`yarn build`

Then you can use the following command to run the captures:

```sh
./capture ../StateOfCSS-2020 ../screenshots/css_2020
# or if you want to monitor how long it takes
time ./capture ../StateOfCSS-2020 ../screenshots/css_2020 
```

where `../StateOfCSS-2020` is the relative path to the survey results app,
and `../screenshots/css_2020` the relative path to the directory used
to save the screenshots.

Some logs are gonna be generated in `capture.log`.

## Contributing

This project use prettier to maintain a consistent formatting,
in order to format your code, please run:

`yarn fmt`

You can also check that the code was properly formatted using:

`yarn fmt:check`



